<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bosque</title>

<style>
body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: Arial, sans-serif;
  background: url("BosqueF.jpg") center bottom / cover no-repeat fixed;
}

/* T√≠tulo fijo */
.titulo {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #10b050;
  color: white;
  padding: 12px 40px;
  border-radius: 6px;
  font-size: 28px;
  font-weight: bold;
  border: 3px solid black;
  box-shadow: 0 0 12px rgba(0,0,0,0.4);
  z-index: 10;
}

/* Contenedor de basura */
.basura-container {
  position: absolute;
  bottom: 0;
}

/* Imagen de basura */
.objeto {
  display: block;
  cursor: pointer;
  user-select: none;
  width: 50px;
  height: 50px;
}

/* Panel desplegable */
#panelContador {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: rgba(16,176,80,0.9);
  color: white;
  padding: 10px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: bold;
  border: 2px solid black;
  z-index: 999;
  width: 200px;
}

#panelHeader {
  cursor: pointer;
  text-align: center;
  font-weight: bold;
  margin-bottom: 5px;
}

#panelContent {
  display: none;
}

#panelContent button {
  margin-top: 10px;
  padding: 5px 10px;
  font-weight: bold;
  cursor: pointer;
}

/* Mensaje final */
#mensajeFinal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: rgba(16,176,80,0.95);
  color: white;
  padding: 25px 40px;
  font-size: 22px;
  font-weight: bold;
  border-radius: 10px;
  border: 3px solid black;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
  text-align: center;
  display: none;
  z-index: 1000;
  opacity: 0;
  transition: opacity 1s;
}
</style>
</head>
<body>
<div class="titulo">Bosque</div>

<!-- Panel desplegable -->
<div id="panelContador">
  <div id="panelHeader">üóëÔ∏è Estad√≠sticas </div>
  <div id="panelContent">
    <p id="total">Cantidad de basura total: 30</p>
    <p id="recolectada">Cantidad de basura recolectada: 0</p>
    <p id="faltante">Basura faltante: 30</p>
    <button id="reiniciarBtn">üîÑ Reiniciar</button>
  </div>
</div>

<!-- Mensaje final -->
<div id="mensajeFinal"></div>

<script>
const imagenes = [
  "img/basura1.png","img/basura2.png","img/basura3.png","img/basura4.png",
  "img/basura5.png","img/basura6.png","img/basura7.png","img/basura8.png",
  "img/basura9.png","img/basura10.png","img/basura11.png","img/basura12.png"
];

const totalBasura = 30;
let recolectada = 0;

const panelTotal = document.getElementById("total");
const panelRecolectada = document.getElementById("recolectada");
const panelFaltante = document.getElementById("faltante");
const mensajeFinal = document.getElementById("mensajeFinal");

const panelHeader = document.getElementById("panelHeader");
const panelContent = document.getElementById("panelContent");
const reiniciarBtn = document.getElementById("reiniciarBtn");

const mensajesFinales = [
  "¬°Gracias por ayudar al planeta!",
  "Perfecto, as√≠ cuidamos el mundo",
  "¬°La naturaleza te lo agradece!",
  "Cada acci√≥n cuenta, genial trabajo",
  "Bosque limpio, mundo feliz",
  "¬°Eres un h√©roe del medio ambiente!",
  "El planeta sonr√≠e gracias a ti",
  "¬°Basura recogida, misi√≥n cumplida!",
  "As√≠ protegemos a nuestra tierra",
  "Excelente, sigamos cuidando la naturaleza"
];

// Toggle panel desplegable
panelHeader.addEventListener("click", () => {
  panelContent.style.display = (panelContent.style.display === "none") ? "block" : "none";
});

// Crear basura
function crearObjeto() {
  const contenedor = document.createElement("div");
  contenedor.classList.add("basura-container");

  const obj = document.createElement("img");
  obj.classList.add("objeto");

  const randomImg = imagenes[Math.floor(Math.random() * imagenes.length)];
  obj.src = randomImg;

  const panelWidth = 200;
  const ventanaWidth = window.innerWidth;

  const profundidad = Math.random();
  const escala = 0.5 + (profundidad * 1);
  obj.style.transform = `rotate(${(Math.random()*50)-25}deg) scale(${escala})`;
  obj.style.transformOrigin = "center center";

  let x = Math.random() * (ventanaWidth - 60);
  if(x > ventanaWidth - panelWidth - 60) x = ventanaWidth - panelWidth - 60;
  contenedor.style.left = `${x}px`;
  contenedor.style.bottom = `${profundidad * 120}px`;
  contenedor.style.position = "absolute";
  contenedor.style.zIndex = Math.floor(profundidad * 100);

  obj.addEventListener("click", () => {
    contenedor.remove();
    recolectada++;
    actualizarPanel();
  });

  contenedor.appendChild(obj);
  document.body.appendChild(contenedor);
}

// Actualizar panel
function actualizarPanel() {
  panelRecolectada.textContent = `Cantidad de basura recolectada: ${recolectada}`;
  panelFaltante.textContent = `Basura faltante: ${totalBasura - recolectada}`;

  if(recolectada === totalBasura) {
    const mensaje = mensajesFinales[Math.floor(Math.random() * mensajesFinales.length)];
    mostrarMensajeFinal(mensaje);
  }
}

// Mostrar mensaje final
function mostrarMensajeFinal(texto) {
  mensajeFinal.textContent = texto;
  mensajeFinal.style.display = "block";
  setTimeout(() => mensajeFinal.style.opacity = 1, 50);
}

// Reiniciar juego
reiniciarBtn.addEventListener("click", () => {
  document.querySelectorAll(".basura-container").forEach(el => el.remove());
  recolectada = 0;
  actualizarPanel();
  mensajeFinal.style.display = "none";
  mensajeFinal.style.opacity = 0;
  for(let i=0; i<totalBasura; i++){
    crearObjeto();
  }
});

// Crear basura inicial
for(let i=0; i<totalBasura; i++){
  crearObjeto();
}

function reiniciarTodo(){
  document.querySelectorAll(".basura-container").forEach(el => el.remove());
  recolectada = 0;
  actualizarPanel();
  mensajeFinal.style.display = "none";
  mensajeFinal.style.opacity = 0;
  for(let i=0; i<totalBasura; i++){ crearObjeto(i); }
}

// Registrar comando Ctrl+R
document.addEventListener("keydown", (e)=>{
  if (e.ctrlKey && (e.key === "r" || e.key === "R")){
    e.preventDefault();
    reiniciarTodo();
  }
});


// Listener de teclado: Ctrl + L
document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && (e.key === "l" || e.key === "L")) {
    e.preventDefault(); // evita que se abra la barra de direcciones en algunos navegadores
    limpiarTodo();
  }
});

// Funci√≥n para limpiar toda la basura autom√°ticamente
function limpiarTodo() {
  document.querySelectorAll(".basura-container").forEach(el => el.remove());
  recolectada = totalBasura; // marcar todas como recolectadas
  actualizarPanel();
  const mensaje = mensajesFinales[Math.floor(Math.random() * mensajesFinales.length)];
  mostrarMensajeFinal(mensaje);
}

// Listener de teclado: Ctrl + L
document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && (e.key === "l" || e.key === "L")) {
    e.preventDefault(); // evita que se abra la barra de direcciones en algunos navegadores
    limpiarTodo();
  }
});

</script>
</body>
</html>
