<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parque</title>

<style>
body {
    margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: Arial, sans-serif;
  /* Fondo enfocado en la parte inferior */
  background: url("parqueF.jpg") center bottom / cover no-repeat fixed;
}

.titulo {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #2E8B57; /* verde bosque */
  color: white;
  padding: 12px 40px;
  border-radius: 6px;
  font-size: 28px;
  font-weight: bold;
  border: 3px solid black;
  box-shadow: 0 0 12px rgba(0,0,0,0.4);
  z-index: 10;
}

.basura-container {
  position: absolute;
}

.objeto {
  display: block;
  cursor: pointer;
  user-select: none;
  width: 50px;
  height: 50px;
}

#panelContador {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: rgba(34,139,34,0.9); /* verde bosque transl√∫cido */
  color: white;
  padding: 10px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: bold;
  border: 2px solid black;
  z-index: 999;
  width: 200px;
}

#panelHeader {
  cursor: pointer;
  text-align: center;
  font-weight: bold;
  margin-bottom: 5px;
}

#panelContent {
  display: none;
}

#panelContent button {
  margin-top: 10px;
  padding: 5px 10px;
  font-weight: bold;
  cursor: pointer;
}

#mensajeFinal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: rgba(34,139,34,0.95);
  color: white;
  padding: 25px 40px;
  font-size: 22px;
  font-weight: bold;
  border-radius: 10px;
  border: 3px solid black;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
  text-align: center;
  display: none;
  z-index: 1000;
  opacity: 0;
  transition: opacity 1s;
}
</style>
</head>
<body>
<div class="titulo">Parque</div>

<div id="panelContador">
  <div id="panelHeader">üóëÔ∏è Estad√≠sticas </div>
  <div id="panelContent">
    <p id="total">Cantidad de basura total: 50</p>
    <p id="recolectada">Basura recolectada: 0</p>
    <p id="faltante">Basura faltante: 50</p>
    <button id="reiniciarBtn">üîÑ Reiniciar</button>
  </div>
</div>

<div id="mensajeFinal"></div>

<script>
const imagenes = [
  "img/basura1.png","img/basura2.png","img/basura3.png","img/basura4.png",
  "img/basura5.png","img/basura6.png","img/basura7.png","img/basura8.png",
  "img/basura9.png","img/basura10.png","img/basura11.png","img/basura12.png",
  "img/basura13.png","img/basura14.png","img/basura15.png","img/basura16.png"
];

const totalBasura = 50;
let recolectada = 0;

const panelTotal = document.getElementById("total");
const panelRecolectada = document.getElementById("recolectada");
const panelFaltante = document.getElementById("faltante");
const mensajeFinal = document.getElementById("mensajeFinal");

const panelHeader = document.getElementById("panelHeader");
const panelContent = document.getElementById("panelContent");
const reiniciarBtn = document.getElementById("reiniciarBtn");

const mensajesFinales = [
  "¬°Parque limpio, naturaleza agradecida!",
  "Cada pedazo de basura cuenta",
  "Gracias por cuidar la flora y fauna",
  "Tu esfuerzo protege el vecindario",
  "Basura eliminada, vista verde despejada",
  "Eres un h√©roe del parque",
  "Los √°rboles te agradecen",
  "Misi√≥n cumplida, espacio natural limpio",
  "Excelente, seguimos cuidando el parque",
  "Peque√±as acciones, gran impacto ecol√≥gico"
];

panelHeader.addEventListener("click", () => {
  panelContent.style.display = (panelContent.style.display === "none") ? "block" : "none";
});

function crearObjeto(index) {
  const contenedor = document.createElement("div");
  contenedor.classList.add("basura-container");

  const obj = document.createElement("img");
  obj.classList.add("objeto");

  const randomImg = imagenes[Math.floor(Math.random() * imagenes.length)];
  obj.src = randomImg;

  const ventanaWidth = window.innerWidth;
  const ventanaHeight = window.innerHeight;

  const escala = 0.5 + Math.random() * 0.5;
  obj.style.transform = `rotate(${(Math.random()*30)-15}deg) scale(${escala})`;
  obj.style.transformOrigin = "center center";

  // Distribuci√≥n tipo suelo del parque (m√°s dispersa)
  const yMin = ventanaHeight * 0.65;
  const yMax = ventanaHeight * 0.9;
  const y = yMin + Math.random() * (yMax - yMin);

  const xMin = ventanaWidth * 0.05;
  const xMax = ventanaWidth * 0.95;
  const x = xMin + Math.random() * (xMax - xMin);

  contenedor.style.left = `${x}px`;
  contenedor.style.top = `${y}px`;
  contenedor.style.position = "absolute";
  contenedor.style.zIndex = Math.floor(Math.random() * 100);

  obj.addEventListener("click", () => {
    contenedor.remove();
    recolectada++;
    actualizarPanel();
  });

  contenedor.appendChild(obj);
  document.body.appendChild(contenedor);
}

function actualizarPanel() {
  panelRecolectada.textContent = `Basura recolectada: ${recolectada}`;
  panelFaltante.textContent = `Basura faltante: ${totalBasura - recolectada}`;

  if(recolectada === totalBasura) {
    const mensaje = mensajesFinales[Math.floor(Math.random() * mensajesFinales.length)];
    mostrarMensajeFinal(mensaje);
  }
}

function mostrarMensajeFinal(texto) {
  mensajeFinal.textContent = texto;
  mensajeFinal.style.display = "block";
  setTimeout(() => mensajeFinal.style.opacity = 1, 50);
}

reiniciarBtn.addEventListener("click", () => {
  document.querySelectorAll(".basura-container").forEach(el => el.remove());
  recolectada = 0;
  actualizarPanel();
  mensajeFinal.style.display = "none";
  mensajeFinal.style.opacity = 0;
  for(let i=0; i<totalBasura; i++){
    crearObjeto(i);
  }
});

// Crear basura inicial
for(let i=0; i<totalBasura; i++){
  crearObjeto(i);
}

function reiniciarTodo(){
  document.querySelectorAll(".basura-container").forEach(el => el.remove());
  recolectada = 0;
  actualizarPanel();
  mensajeFinal.style.display = "none";
  mensajeFinal.style.opacity = 0;
  for(let i=0; i<totalBasura; i++){ crearObjeto(i); }
}

// Registrar comando Ctrl+R
document.addEventListener("keydown", (e)=>{
  if (e.ctrlKey && (e.key === "r" || e.key === "R")){
    e.preventDefault();
    reiniciarTodo();
  }
});

// Funci√≥n para limpiar toda la basura autom√°ticamente
function limpiarTodo() {
  document.querySelectorAll(".basura-container").forEach(el => el.remove());
  recolectada = totalBasura; // marcar todas como recolectadas
  actualizarPanel();
  const mensaje = mensajesFinales[Math.floor(Math.random() * mensajesFinales.length)];
  mostrarMensajeFinal(mensaje);
}

// Listener de teclado: Ctrl + L
document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && (e.key === "l" || e.key === "L")) {
    e.preventDefault(); // evita que se abra la barra de direcciones en algunos navegadores
    limpiarTodo();
  }
});

</script>
<script>
document.addEventListener("keydown", e => {
    // Ctrl + Alt + I ‚Üí Volver al index
    if (e.ctrlKey && e.altKey && e.key.toLowerCase() === "i") {
        e.preventDefault();
        window.location.href = "./index.html"; // Ajusta la ruta si es necesario
    }
});
</script>

</body>
</html>
